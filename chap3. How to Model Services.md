# 3. 서비스 모델링하기

이 장에서는 마이크로서비스의 경계에 대해 생각해볼 것이다. 그 과정에서 뮤직코퍼레이션이라는 가상의 대상을 예를 들어 설명한다.

## 3.2 무엇이 좋은 서비스를 만드는가? 

1. 느슨한 결합(LOOSE COUPLING) : 하나의 서비스가 변경될 때 다른 서비스가 변경되지 않는 것
2. 강한 응집력(HIGH COHESION) : 서로 연관된 행위는 한곳에 모아두고, 그렇지 않은 곳은 다른곳에 두는것

## 3.3 경계가 있는 콘텍스트

> 경계가 있는 콘텍스트 : 명백한 인터페이스가 존재하며, 그것은 어떤 모델이 다른 콘텍스트와 공유될지 결정한다.

1. 감춰진 공유 모델 : 경계가 있는 콘텍스트 간에 **공유 모델** 이 존재할 수 있다. 이 공유 모델 안에 서로의 모든 정보를 노출할 필요는 없으며, 외부/내부 전용 표현으로 구분할 수 있다. 내부적/외부적 관심사를 분리하여 관리하자
2. 모듈과 서비스 : 경계가 있는 콘텍스트를 모듈로 모델링하고, 서비스 경계를 정하여 분리하는 단계를 거친다면 강한 결합을 초래하는 상황을 피할 수 있다.
3. 성급한 분해 : 서비스 경계에 대해 정확하지 않은 인식을 가진 채로, 시스템을 마이크로서비스로 성급하게 분리하면 고생할 수 있다 😧

## 3.4 비즈니스 능력

경계가 있는 콘텍스트 정의 단계에서 고민할때는 **공유 데이터 관점** 이 아닌 **나머지 도메인을 제공하는 콘텍스트의 능력(Capability) 관점** 에서 봐야 한다.

 > 이 콘텍스트는 무엇을 하는가?

 > 그 일을 하기 위해서 어떤 데이터가 필요한가?


## 3.5 거북이 밑에 거북이 : 중첩(nested)에 대한 이야기

완전 분리 방식 대신 **내포된 경계가 있는 콘텍스트 방식**을 선택하라. 이는 아래 두 장점을 가져온다.

1. 조직 구조와 소프트웨어 아키텍쳐 간의 상호작용(10장에서 계속)
2. 테스팅의 단순화(7장에서 계속)를 위해 아키텍처를 큰 덩어리로 묶을 수 있다.


## 3.6 비즈니스 콘셉트 관점에서의 커뮤니케이션

코드 변경 사항은 비즈니스가 시스템의 동작 방식을 변경하려는 경우에 발생한다. 그러므로 비즈니스 컨셉트 관점에서 마이크로서비스 간의 커뮤니케이션을 생각하는것이 좋다. 조직내 사용하는 용어와 개념도 인터페이스에 반영되어야 한다.

## 3.7 기술적 경계

기술적 접합부에 따라 모델링된 서비스 경계는 잦은 변경과 취약점을 가져온다. 
